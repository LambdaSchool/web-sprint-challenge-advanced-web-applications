{"ast":null,"code":"var _jsxFileName = \"/Users/mustafa/Documents/Lambda/Sprints/web-sprint-challenge-advanced-web-applications/client/src/components/Login.js\";\nimport React, { useState } from \"react\";\nimport { axiosWithAuth } from \"../util/axioswithAuth\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Login = () => {\n  // make a post request to retrieve a token from the api\n  // when you have handled the token, navigate to the BubblePage route\n  const cred = {\n    username: \"\",\n    password: \"\"\n  };\n  const [state, setState] = useState(cred);\n  const {\n    push\n  } = useHistory();\n\n  const handleChange = e => {\n    e.persist();\n    setState({ ...state,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const login = e => {\n    e.preventDefault(); // make a post request to the login endpoint on the server\n\n    axiosWithAuth().post(\"http://localhost:5000/api/login\", state).then(res => {\n      console.log(\"POST response: \", res);\n      localStorage.setItem(\"token\", res.data.payload); // redirect the user to the app's main logged in page\n\n      push(\"/protected\");\n    }).catch(err => {\n      console.log(err);\n      const error = document.querySelector(\".error\");\n      error.textContent = \"Incorrect Login\";\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Welcome to the Bubble App!\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"Build a login page here\"), React.createElement(\"div\", {\n    className: \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"password: i<3Lambd4\"), React.createElement(\"form\", {\n    onSubmit: login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    value: state.username,\n    onChange: handleChange,\n    placeholder: \"username\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    value: state.password,\n    onChange: handleChange,\n    placeholder: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Log in\"), React.createElement(\"span\", {\n    className: \"error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }))));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/mustafa/Documents/Lambda/Sprints/web-sprint-challenge-advanced-web-applications/client/src/components/Login.js"],"names":["React","useState","axiosWithAuth","useHistory","Login","cred","username","password","state","setState","push","handleChange","e","persist","target","name","value","login","preventDefault","post","then","res","console","log","localStorage","setItem","data","payload","catch","err","error","document","querySelector","textContent"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AAGA,MAAMC,KAAK,GAAG,MAAM;AAClB;AACA;AACA,QAAMC,IAAI,GAAG;AAACC,IAAAA,QAAQ,EAAE,EAAX;AAAeC,IAAAA,QAAQ,EAAE;AAAzB,GAAb;AACA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAACI,IAAD,CAAlC;AACA,QAAM;AAAEK,IAAAA;AAAF,MAAWP,UAAU,EAA3B;;AAEA,QAAMQ,YAAY,GAAGC,CAAC,IAAI;AACxBA,IAAAA,CAAC,CAACC,OAAF;AAEAJ,IAAAA,QAAQ,CAAC,EACL,GAAGD,KADE;AAEL,OAACI,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASE;AAFrB,KAAD,CAAR;AAID,GAPD;;AASA,QAAMC,KAAK,GAAGL,CAAC,IAAI;AACjBA,IAAAA,CAAC,CAACM,cAAF,GADiB,CAEjB;;AACAhB,IAAAA,aAAa,GACViB,IADH,CACQ,iCADR,EAC2CX,KAD3C,EAEGY,IAFH,CAEQC,GAAG,IAAI;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BF,GAA9B;AACAG,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BJ,GAAG,CAACK,IAAJ,CAASC,OAAvC,EAFW,CAGX;;AACAjB,MAAAA,IAAI,CAAC,YAAD,CAAJ;AACD,KAPH,EAQGkB,KARH,CAQSC,GAAG,IAAK;AACbP,MAAAA,OAAO,CAACC,GAAR,CAAYM,GAAZ;AACA,YAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAd;AACAF,MAAAA,KAAK,CAACG,WAAN,GAAoB,iBAApB;AACD,KAZH;AAaD,GAhBD;;AAkBA,SAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAFF,EAIE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI,qBAAJ,CADF,EAEE;AAAM,IAAA,QAAQ,EAAEhB,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAET,KAAK,CAACF,QAHf;AAIE,IAAA,QAAQ,EAAEK,YAJZ;AAKE,IAAA,WAAW,EAAG,UALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQE;AACE,IAAA,IAAI,EAAC,UADP;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAEH,KAAK,CAACD,QAHf;AAIE,IAAA,QAAQ,EAAEI,YAJZ;AAKE,IAAA,WAAW,EAAG,UALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,EAeE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAfF,EAgBE;AAAM,IAAA,SAAS,EAAG,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,CAFF,CAJF,CAFF;AA8BD,CAhED;;AAiEA,eAAeP,KAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { axiosWithAuth } from \"../util/axioswithAuth\";\nimport { useHistory } from \"react-router-dom\";\n\n\nconst Login = () => {\n  // make a post request to retrieve a token from the api\n  // when you have handled the token, navigate to the BubblePage route\n  const cred = {username: \"\", password: \"\"}\n  const [state, setState] = useState(cred);\n  const { push } = useHistory();\n\n  const handleChange = e => {\n    e.persist();\n\n    setState({\n        ...state,\n        [e.target.name]: e.target.value\n    });\n  };\n\n  const login = e => {\n    e.preventDefault();\n    // make a post request to the login endpoint on the server\n    axiosWithAuth()\n      .post(\"http://localhost:5000/api/login\", state)\n      .then(res => {\n        console.log(\"POST response: \",res);\n        localStorage.setItem(\"token\", res.data.payload);\n        // redirect the user to the app's main logged in page\n        push(\"/protected\");\n      })\n      .catch(err =>  { \n        console.log(err);\n        const error = document.querySelector(\".error\");\n        error.textContent = \"Incorrect Login\";\n      });\n  };\n\n  return (\n    \n    <div>\n      <h1>Welcome to the Bubble App!</h1>\n      <p>Build a login page here</p>\n    \n      <div className=\"login\">\n        <p>{\"password: i<3Lambd4\"}</p>\n        <form onSubmit={login}>\n          <input\n            type=\"text\"\n            name=\"username\"\n            value={state.username}\n            onChange={handleChange}\n            placeholder = \"username\"\n          />\n          <input\n            type=\"password\"\n            name=\"password\"\n            value={state.password}\n            onChange={handleChange}\n            placeholder = \"password\"\n          />\n          <button>Log in</button>\n          <span className = \"error\"></span>\n        </form>\n      </div>\n\n    </div>\n  );\n};\nexport default Login;"]},"metadata":{},"sourceType":"module"}